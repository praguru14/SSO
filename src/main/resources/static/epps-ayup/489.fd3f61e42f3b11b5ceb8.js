(self.webpackChunkepps_ayup=self.webpackChunkepps_ayup||[]).push([[489],{15489:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DashboardModule:()=>A});var i=a(92781),r=a(38583),s=a(84382),l=a(30854),n=a(42590),o=a(45907),d=a(37716),c=a(93500),p=a(92340),u=a(91841);class h{constructor(e){this.http=e}getChartData(e){return this.http.get(`${p.N.baseUrl}/epps-reports/dashboard/v1/dashboardReportData?programId=${e.pid}`)}}h.\u0275fac=function(e){return new(e||h)(d.LFG(u.eN))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var m=a(8307),v=a(36290),g=a(51095);const y=["chartDiv"];function b(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"li",12),d.TgZ(1,"button",13),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().loadChartData(t.programId)}),d._UZ(2,"i",14),d.TgZ(3,"span",15),d._uU(4),d.qZA(),d.qZA(),d._UZ(5,"i",16),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(4),d.Oqu(e.programDisplayName)}}const f=function(e){return{"side-menu-collapsed":e}};s.FgM(o.Z),s.FgM(n.Z);class D{constructor(e,t,a){this._sharedService=e,this._dashboardService=t,this.router=a,this.isSideMenuCollapsed=!0}ngOnInit(){this._sharedService.personnelData.subscribe(e=>this.personnelData=e),this._sharedService.getProgramList({roleCode:this.personnelData.roleCode}).subscribe(e=>{this.programList=e.data.filter(e=>"D"===e.programMtqrFlag),this.loadChartData(this.programList[0].programId)})}loadChartData(e){this._dashboardService.getChartData({pid:e}).subscribe(t=>{var a,i,r,s,l,n;this.chartDisplayName=null===(i=null===(a=t.data[0])||void 0===a?void 0:a.reportDetails)||void 0===i?void 0:i.chartDisplayName,this.gridDisplayName=null===(s=null===(r=t.data[0])||void 0===r?void 0:r.reportDetails)||void 0===s?void 0:s.gridReportDisplayName,this.chartXData=null===(l=t.data[0])||void 0===l?void 0:l.chartPanelXaxis,this.chartYData=null===(n=t.data[0])||void 0===n?void 0:n.chartPanelYaxis,this.chartDiv.nativeElement.innerHTML="",setTimeout(()=>{"loadAgewiseDefTeeth"===e?this.initLineChart(this.chartXData,this.chartYData):"loadMediCatgwiseCount"===e&&this.initGradDonutChart(this.chartXData,this.chartYData)},100)})}sidemenuToggle(e){this.isSideMenuCollapsed=e}initChartWithBullets(e,t){let a=s.Ue8("chartdiv",l.zO);a.data=t;let i=a.xAxes.push(new l.$l);i.dataFields.category="name",i.renderer.minGridDistance=50,i.renderer.grid.template.location=.5,i.startLocation=.5,i.endLocation=.5,a.yAxes.push(new l.mn).baseValue=0;let r=a.series.push(new l.eh);r.dataFields.valueY="value",r.dataFields.categoryX="name";let n=r.bullets.push(new l.gT);n.tooltipText="{valueY}",r.tooltip.background.cornerRadius=20,r.tooltip.background.strokeOpacity=0,r.tooltip.pointerOrientation="vertical",r.tooltip.label.minWidth=40,r.tooltip.label.minHeight=40,r.tooltip.label.textAlign="middle",r.tooltip.label.textValign="middle",n.states.create("hover").properties.scale=1.3,a.cursor=new l.Ll,a.cursor.behavior="panXY",a.cursor.xAxis=i,a.cursor.snapToSeries=r,i.start=.79,i.keepSelection=!1}initLineChart(e,t){let a=s.Ue8("chartdiv",l.zO);a.data=t;let i=a.xAxes.push(new l.$l);i.dataFields.category="name",i.renderer.minGridDistance=50;a.yAxes.push(new l.mn);let r=a.series.push(new l.eh);r.dataFields.valueY="value",r.dataFields.categoryX="name",r.strokeWidth=2,r.minBulletDistance=10,r.tooltipText="{valueY}",r.tooltip.pointerOrientation="vertical",r.tooltip.background.cornerRadius=20,r.tooltip.background.fillOpacity=.5,r.tooltip.label.padding(12,12,12,12),a.cursor=new l.Ll,a.cursor.xAxis=i,a.cursor.snapToSeries=r}initColumnChart(){let e=s.Ue8("chartdiv",l.B4);e.data=[{country:"USA",visits:2025},{country:"China",visits:1882},{country:"Japan",visits:1809},{country:"Germany",visits:1322},{country:"UK",visits:1122},{country:"France",visits:1114},{country:"India",visits:984},{country:"Spain",visits:711},{country:"Netherlands",visits:665}];let t=e.xAxes.push(new l.$l);t.dataFields.category="country",t.renderer.grid.template.location=0,t.renderer.minGridDistance=30;e.yAxes.push(new l.mn);let a=e.series.push(new l.dU);a.dataFields.valueY="visits",a.dataFields.categoryX="country",a.name="Visits",a.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",a.columns.template.fillOpacity=.8;let i=a.columns.template;i.strokeWidth=0,i.strokeOpacity=0,a.columns.template.adapter.add("fill",(t,a)=>e.colors.getIndex(a.dataItem.index))}initGradDonutChart(e,t){let a=s.Ue8("chartdiv",l.uc);a.innerRadius=s.aQA(40),a.data=t.map(e=>({name:e.name,value:e.value}));let i=a.series.push(new l.fW);i.dataFields.value="value",i.dataFields.category="name",i.slices.template.propertyFields.fill="color";let r=a.seriesContainer.createChild(s.__J);r.textAlign="middle",r.horizontalCenter="middle",r.verticalCenter="middle",r.adapter.add("text",(e,t)=>"[font-size:18px]Total[/]\n[bold font-size:30px]"+i.dataItem.values.value.sum+"[/]");let n=new s.ut1;n.brightnesses.push(-.8,-.8,-.5,0,-.5),i.slices.template.fillModifier=n,i.slices.template.strokeModifier=n,i.slices.template.strokeOpacity=.4,i.slices.template.strokeWidth=0,i.alignLabels=!0,i.labels.template.text="{category}({value.formatNumber('#')})",a.legend=new l.De,a.legend.scrollable=!0,a.legend.position="right",a.legend.labels.template.text="{category}({value.formatNumber('#')})",a.legend.valueLabels.template.disabled=!0,i.slices.template.events.on("hit",e=>{e.target.dataItem.component.slices.each(function(t){t.isActive&&t!=e.target&&(t.isActive=!1)});t.filter(t=>t.name===e.target.dataItem.dataContext.name)})}}D.\u0275fac=function(e){return new(e||D)(d.Y36(c.F),d.Y36(h),d.Y36(m.F0))},D.\u0275cmp=d.Xpm({type:D,selectors:[["app-dashboard"]],viewQuery:function(e,t){if(1&e&&d.Gf(y,5),2&e){let e;d.iGM(e=d.CRH())&&(t.chartDiv=e.first)}},decls:13,vars:8,consts:[[3,"personnelData","pageType","sidemenuOpen"],[1,"dashboard-page","home-page"],[1,"content-wrapper"],[1,"side-menu"],[1,"side-menu-list"],["class","side-menu-list-item","routerLinkActive","active",4,"ngFor","ngForOf"],[1,"content"],[1,"card","m-0"],[1,"card-body"],[1,"card-title"],["id","chartdiv",2,"height","calc(100vh - 132px)"],["chartDiv",""],["routerLinkActive","active",1,"side-menu-list-item"],["mat-flat-button","",1,"bg-transparent",3,"click"],[1,"icon","icon-line-chart"],[1,"title"],[1,"icon","icon-chevron-right"]],template:function(e,t){1&e&&(d.TgZ(0,"app-header",0),d.NdJ("sidemenuOpen",function(e){return t.sidemenuToggle(e)}),d.qZA(),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"ul",4),d.YNc(5,b,6,1,"li",5),d.qZA(),d.qZA(),d.TgZ(6,"div",6),d.TgZ(7,"div",7),d.TgZ(8,"div",8),d.TgZ(9,"h5",9),d._uU(10),d.qZA(),d._UZ(11,"div",10,11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Q6J("personnelData",t.personnelData)("pageType","dashboard"),d.xp6(1),d.Tol(d.VKq(6,f,!0===t.isSideMenuCollapsed)),d.xp6(4),d.Q6J("ngForOf",t.programList),d.xp6(5),d.Oqu(t.chartDisplayName))},directives:[v.G,r.sg,m.Od,g.lW],styles:[""]});const x=[{path:"",component:D}];class A{}A.\u0275fac=function(e){return new(e||A)},A.\u0275mod=d.oAB({type:A}),A.\u0275inj=d.cJS({imports:[[r.ez,i.m,m.Bz.forChild(x)]]})}}]);